<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<title>時間選択</title>
	<link rel="stylesheet" href="./css/style.css">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">

	<style>
		.header{
	        font-size: 70px;
        }
        
        .h1{
			font-size:60px ;
		}
		
		.time {
			background-color: white;
			border-bottom: solid black thin;
		}

		.time:hover {
			background-color: #ffff8e;
		}
		
		.timeTxt{
			font-size: 70px;
			color: black;
		}

		.reserved {
			background-color: rgb(208, 208, 208);
			pointer-events: none;
			/* 選択不可にする */
		}
		
		.back{
			 width: 300px;
             height:100px;
             font-size: 250%;
		}
	</style>
</head>

<body>

	<header class="header">
		時間帯選択
	</header>
	
	<div class="row pb-5 pt-3 justify-content-center">
		<div class="col-11">
			<button type="submit" id="headBtn" class="back btn btn-primary" onclick="location.href='/selectDate'">戻る</button>
		</div>
	</div>
	<div class="h1 row justify-content-center mb-5 mt-4 py-3 border" id="adviser">
		<div class="col-10">
		    アドバイザー：<span th:text="${adviserName}"></span>
		</div>
	</div>
	<div class="h1 row justify-content-center pt-5" id="adviser">
		<div class="col-10">
		    <span th:text="${selectDate}"></span>
		</div>
	</div>

	<div class="container">
		<form id="timeForm" action="/inputForm" method="post">
			<input type="hidden" name="selectTime" id="selectTime">
			<div class="time row mt-5">
				<a href="#" class="timeTxt" id="time-10" style="text-decoration:none;">10:00</a>
			</div>
			<div class="time row my-5">
				<a href="#" class="timeTxt" id="time-11" style="text-decoration:none;">11:00</a>
			</div>
			<div class="time row my-5">
				<a href="#" class="timeTxt" id="time-12" style="text-decoration:none;">12:00</a>
			</div>
			<div class="time row my-5">
				<a href="#" class="timeTxt" id="time-13" style="text-decoration:none;">13:00</a>
			</div>
			<div class="time row my-5">
				<a href="#" class="timeTxt" id="time-14" style="text-decoration:none;">14:00</a>
			</div>
			<div class="time row my-5">
				<a href="#" class="timeTxt" id="time-15" style="text-decoration:none;">15:00</a>
			</div>
			<div class="time row my-5">
				<a href="#" class="timeTxt" id="time-16" style="text-decoration:none;">16:00</a>
			</div>
			<div class="time row my-5">
				<a href="#" class="timeTxt" id="time-17" style="text-decoration:none;">17:00</a>
			</div>
			<div class="time row my-5">
				<a href="#" class="timeTxt" id="time-18" style="text-decoration:none;">18:00</a>
			</div>
			<div class="time row my-5">
				<a href="#" class="timeTxt" id="time-19" style="text-decoration:none;">19:00</a>
			</div>
		</form>
		
	</div>

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
		crossorigin="anonymous"></script>
	<script th:inline="javascript">
		// ここに予約済みの時間帯を取得し、該当する要素にreservedクラスを追加するJavaScriptコードを追加する

		const reserveList = /*[[${reserveList}]]*/"reserveList";
		const nowTimeList = /*[[${nowTimeList}]]*/"nowTimeList";
		const ndate = /*[[${date}]]*/"date";
		const ntime = /*[[${time}]]*/"time";
		const sdate = /*[[${sDate}]]*/"sDate";

		reserveList.forEach(reserve => {
			const time = reserve.time.substr(0, 2);
			document.getElementById('time-' + time).classList.add('reserved');
		});
		
		if(nowTimeList.length != 0) {
			nowTimeList.forEach(time => {
				document.getElementById('time-' + time).classList.add('reserved');
			})
		}
		
		const form = document.getElementById('timeForm');
		for (let i = 0; i < 10; i++) {
			const time = document.getElementById('time-' + (i + 10));
			time.addEventListener('click', () => {
				const time = (i + 10) + ':00:00';
				document.getElementById('selectTime').setAttribute('value', time);
				console.log(document.getElementById('selectTime').getAttribute('value'));
				form.submit();
			});
		}
	</script>
</body>

</html>